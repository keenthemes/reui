{"$schema":"https://ui.shadcn.com/schema/registry-item.json","name":"p-carousel-10","type":"registry:block","title":"Carousel with overlay thumbnail navigation","description":"Carousel with overlay thumbnail navigation","dependencies":[],"registryDependencies":["carousel"],"files":[{"path":"p-carousel-10.tsx","type":"registry:block","content":"\"use client\"\n\nimport { useCallback, useEffect, useState } from \"react\"\nimport Image from \"next/image\"\n\nimport { cn } from \"@/lib/utils\"\nimport {\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  type CarouselApi,\n} from \"@/components/ui/carousel\"\n\nconst ITEMS_COUNT = 10\n\nexport function Pattern() {\n  const [mainApi, setMainApi] = useState<CarouselApi>()\n  const [thumbApi, setThumbApi] = useState<CarouselApi>()\n  const [selectedIndex, setSelectedIndex] = useState(0)\n\n  const onThumbClick = useCallback(\n    (index: number) => {\n      if (!mainApi || !thumbApi) return\n      mainApi.scrollTo(index)\n    },\n    [mainApi, thumbApi]\n  )\n\n  const onSelect = useCallback(() => {\n    if (!mainApi || !thumbApi) return\n    const index = mainApi.selectedScrollSnap()\n    setSelectedIndex(index)\n    thumbApi.scrollTo(index)\n  }, [mainApi, thumbApi])\n\n  useEffect(() => {\n    if (!mainApi) return\n    onSelect()\n    mainApi.on(\"select\", onSelect)\n    mainApi.on(\"reInit\", onSelect)\n    return () => {\n      mainApi.off(\"select\", onSelect)\n      mainApi.off(\"reInit\", onSelect)\n    }\n  }, [mainApi, onSelect])\n\n  return (\n    <div className=\"flex w-full max-w-2xl items-center justify-center p-4\">\n      <div className=\"group rounded-4xl relative w-full overflow-hidden\">\n        {/* Main Carousel */}\n        <Carousel setApi={setMainApi} className=\"w-full\">\n          <CarouselContent>\n            {Array.from({ length: ITEMS_COUNT }).map((_, index) => (\n              <CarouselItem key={index}>\n                <div className=\"bg-muted relative aspect-video w-full overflow-hidden\">\n                  <Image\n                    src={`https://picsum.photos/1200/675?grayscale&random=${index + 60}`}\n                    alt={`Slide ${index + 1}`} fill className=\"object-cover\" priority={index === 0} /> </div> </CarouselItem> ))} </CarouselContent> </Carousel> {/* Overlay Thumbnails Container */} <div className=\"absolute inset-x-0 bottom-0 bg-linear-to-t from-black/60 to-transparent p-4 transition-opacity duration-300\"> <div className=\"relative mx-auto w-full max-w-md\"> <Carousel setApi={setThumbApi} opts={{ containScroll: \"keepSnaps\", dragFree: true, }} className=\"w-full\" > <CarouselContent className=\"-ml-2 flex-row\"> {Array.from({ length: ITEMS_COUNT }).map((_, index) => ( <CarouselItem key={index} className=\"basis-1/4 cursor-pointer pl-2 sm:basis-1/8\" onClick={() => onThumbClick(index)} > <div className={cn( \"style-vega:rounded-md rounded-4xl relative aspect-square overflow-hidden border-2 transition-all duration-300\", index === selectedIndex ? \"border-white opacity-100 ring-2 ring-black/20\" : \"border-white/40 opacity-50 hover:opacity-80\" )} > <Image src={`https://picsum.photos/200/200?grayscale&random=${index + 60}`}\n                        alt={`Thumb ${index + 1}`}\n                        fill\n                        className=\"object-cover\"\n                      />\n                    </div>\n                  </CarouselItem>\n                ))}\n              </CarouselContent>\n            </Carousel>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","target":"components/patterns/p-carousel-10.tsx"}]}